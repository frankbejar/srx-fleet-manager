# =============================================================================
# SRX Fleet Manager - Environment Configuration
# =============================================================================
# Copy this file to .env and fill in your values
# DO NOT commit .env to git!

# =============================================================================
# Database Configuration
# =============================================================================
POSTGRES_USER=srx
POSTGRES_PASSWORD=srxpassword
POSTGRES_DB=srx_fleet
DATABASE_URL=postgresql+psycopg2://srx:srxpassword@db:5432/srx_fleet

# =============================================================================
# Redis Configuration
# =============================================================================
REDIS_URL=redis://redis:6379/0

# =============================================================================
# Application Settings
# =============================================================================
APP_NAME=SRX Fleet Manager
APP_VERSION=1.0.0
DEBUG=true
LOG_LEVEL=INFO

# API Settings
API_HOST=0.0.0.0
API_PORT=8000
API_WORKERS=4

# Artifacts storage
ARTIFACT_ROOT=/app/storage
CONFIG_REPO_PATH=/app/storage/configs

# =============================================================================
# SRX Device Credentials
# =============================================================================
# Default credentials for SRX devices (can be overridden per-device)
SRX_DEFAULT_USER=admin
SRX_DEFAULT_PASSWORD=
SRX_DEFAULT_PORT=22
SRX_DEFAULT_TIMEOUT=30

# Connection settings
SRX_MAX_CONCURRENT=5
SRX_CONNECT_TIMEOUT=10
SRX_COMMAND_TIMEOUT=30

# =============================================================================
# Authentication Mode
# =============================================================================
# Options: LOCAL or OIDC
AUTH_MODE=LOCAL

# Local Authentication (if AUTH_MODE=LOCAL)
LOCAL_AUTH_SECRET_KEY=change-this-to-a-random-secret-key
LOCAL_AUTH_ALGORITHM=HS256
LOCAL_AUTH_ACCESS_TOKEN_EXPIRE_MINUTES=60

# OIDC Authentication (if AUTH_MODE=OIDC)
# Microsoft Entra ID (Azure AD) settings
OIDC_AUTHORITY=https://login.microsoftonline.com/<TENANT_ID>/v2.0
OIDC_CLIENT_ID=<your-app-client-id>
OIDC_CLIENT_SECRET=<your-app-client-secret>
OIDC_REDIRECT_URI=http://localhost:3000/auth/callback

# =============================================================================
# SharePoint Integration (Status Reports)
# =============================================================================
# Microsoft Graph API settings for uploading status reports
SHAREPOINT_ENABLED=false
SP_TENANT_ID=<your-tenant-id>
SP_CLIENT_ID=<your-app-client-id>
SP_CLIENT_SECRET=<your-app-client-secret>
SP_SITE_ID=<your-sharepoint-site-id>
SP_DRIVE_ID=<your-document-library-drive-id>
SP_FOLDER_PATH=ChangeRequests

# =============================================================================
# Celery Configuration
# =============================================================================
CELERY_BROKER_URL=redis://redis:6379/0
CELERY_RESULT_BACKEND=redis://redis:6379/0
CELERY_TASK_SERIALIZER=json
CELERY_RESULT_SERIALIZER=json
CELERY_ACCEPT_CONTENT=json
CELERY_TIMEZONE=America/Phoenix

# Celery Beat Schedule
BACKUP_SCHEDULE_ENABLED=true
BACKUP_SCHEDULE_CRON=0 2 * * *  # 2 AM daily
HEALTH_CHECK_INTERVAL=300  # 5 minutes

# =============================================================================
# Next.js Frontend
# =============================================================================
NEXT_PUBLIC_API_URL=http://localhost:8000
NEXT_PUBLIC_APP_NAME=SRX Fleet Manager
NEXT_PUBLIC_ENABLE_ANALYTICS=false

# =============================================================================
# Secrets Management (Optional - Advanced)
# =============================================================================
# Use HashiCorp Vault for production
VAULT_ENABLED=false
VAULT_ADDR=http://vault:8200
VAULT_TOKEN=<vault-token>
VAULT_MOUNT_POINT=secret

# =============================================================================
# Monitoring & Logging
# =============================================================================
LOG_FORMAT=json
LOG_FILE_PATH=/app/storage/logs/app.log
LOG_MAX_BYTES=10485760  # 10MB
LOG_BACKUP_COUNT=5

# Sentry (optional)
SENTRY_DSN=
SENTRY_ENVIRONMENT=development

# =============================================================================
# Safety & Guardrails
# =============================================================================
# Maintenance windows
MAINTENANCE_WINDOWS_ENABLED=true
DEFAULT_MAINTENANCE_START=22:00
DEFAULT_MAINTENANCE_END=06:00

# Commit confirmed timeout (minutes)
COMMIT_CONFIRMED_TIMEOUT=5

# Maximum concurrent device operations
MAX_CONCURRENT_OPERATIONS=5

# Require approval for risky operations
REQUIRE_APPROVAL_POLICY_CHANGES=true
REQUIRE_APPROVAL_ROUTING_CHANGES=true
REQUIRE_APPROVAL_UPGRADES=true

# =============================================================================
# JSNAPy Configuration
# =============================================================================
JSNAPY_TESTS_DIR=/app/jsnapy_tests
JSNAPY_SNAPSHOTS_DIR=/app/storage/jsnapy_snapshots

# =============================================================================
# Git Configuration (Config Versioning)
# =============================================================================
GIT_AUTHOR_NAME=SRX Fleet Manager
GIT_AUTHOR_EMAIL=srx-manager@yourdomain.com
GIT_AUTO_COMMIT=true
GIT_AUTO_PUSH=false

# =============================================================================
# Development Settings
# =============================================================================
# Hot reload for backend
BACKEND_RELOAD=true

# Frontend development server
NEXT_TELEMETRY_DISABLED=1
